module.exports=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(24),a=r(o),u=n(23),i=r(u),l=n(1),c=r(l),s=n(5),f=n(3),d=n(26),p=n(6),m=r(p),_=n(2),h=n(8),v=new i.default,g=process.env.PORT||3e3,y="production",b=a.default.join(__dirname,"/");v.set("view engine","ejs"),v.set("views",b),v.use(i.default.static(b)),v.use(h.enableCORS),v.get("/api/images/:user/:items/:page",h.fetchImages),v.get("*",function(e,t){(0,f.match)({routes:m.default,location:e.url},function(e,n,r){var o=void 0;return e?t.status(500).send(e.message):n?t.redirect(302,n.pathname+n.search):(r?o=(0,d.renderToString)(c.default.createElement(s.Provider,{store:_.store},c.default.createElement(f.RouterContext,r))):t.status(404),t.render("index",{markup:o}))})}),v.listen(g,function(e){return e?console.error(e):void console.info("Listening on http://localhost:"+g+" ["+y+"]")})},function(e,t){e.exports=require("react")},function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(27),a=n(5),u="SET_USER",i="SET_IMAGES",l="SET_ACTIVE_IMAGE",c="CLOSE_ACTIVE_IMAGE",s="RESET",f={user:null,username:null,images:[],activeImage:null,btnDisabled:!0},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments[1];switch(t.type){case u:return r({},e,{user:t.value,btnDisabled:""===t.value});case i:return r({},e,{username:t.value.username,images:e.images.concat(t.value.images)});case l:var n=e.images.filter(function(e){return e.id===t.value})[0].urlBig;return r({},e,{activeImage:n});case c:return r({},e,{activeImage:null});case s:return r({},f);default:return e}},p=o.createStore(d,f),m=function(e){return{user:e.user,username:e.username,images:e.images,page:e.page,activeImage:e.activeImage,btnDisabled:e.btnDisabled,fetching:e.fetching}},_=function(e){return{setUser:function(t){e({type:u,value:t})},setImages:function(t){e({type:i,value:t})},setActiveImage:function(t){e({type:l,value:t})},closeActiveImage:function(){e({type:c})},reset:function(){e({type:s})}}},h=a.connect(m,_);e.exports={connector:h,store:p,reducer:d}},function(e,t){e.exports=require("react-router")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("react-redux")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=r(o),u=n(3),i=n(2),l=n(16),c=r(l),s=n(14),f=r(s),d=n(11),p=r(d),m=a.default.createElement(u.Route,{path:"/",component:c.default},a.default.createElement(u.IndexRoute,{component:f.default,onEnter:function(){return i.store.dispatch({type:"RESET"})}}),a.default.createElement(u.Route,{path:"/gallery/:user",component:p.default}));t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),a=r(o);t.default=function(e,t,n){return a.default.get("http://localhost:3000/api/images/"+e+"/"+t+"/"+n)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e){var t=e.user,n=e.items,r=e.page,o=p+"flickr.people.getPhotos&api_key="+d+"&page="+r+"&per_page="+n+"&user_id="+t+m;return f.default.get(o)}function u(e){var t=p+"flickr.people.getInfo&api_key="+d+"&user_id="+e+m;return f.default.get(t)}function i(e){return e.map(function(e){var t="https://farm"+e.farm+".staticflickr.com/"+e.server+"/"+e.id+"_"+e.secret;return c({},e,{url:t+".jpg",urlBig:t+"_b.jpg"})})}Object.defineProperty(t,"__esModule",{value:!0}),t.enableCORS=t.fetchImages=void 0;var l=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&i.return&&i.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(4),f=r(s),d="f1503d18213f9ea982653d8db9473833",p="https://api.flickr.com/services/rest/?method=",m="&format=json&nojsoncallback=1",_=null;t.fetchImages=function(e,t){var n=_?[a(e.params)]:[a(e.params),u(e.params.user)];f.default.all(n).then(function(e){var n=l(e,2),r=n[0],a=n[1];a&&(_=a.data.person.username._content);var u={username:_,images:[].concat(o(i(r.data.photos.photo)))};t.send(JSON.stringify(u))})},t.enableCORS=function(e,t,n){t.header("Access-Control-Allow-Origin","*"),t.header("Access-Control-Allow-Headers","Origin, X-Requested-With, Content-Type, Accept"),n()}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=r(o),u=n(18),i=r(u),l=n(19),c=r(l),s=a.default.PropTypes,f=s.func,d=s.any,p=s.string,m=function(e){console.log(e.username);var t=function(t){e.onSelected(t.getAttribute("data-id")||t.parentNode.getAttribute("data-id"))},n=function(){return e.images.map(function(e,t){return a.default.createElement("li",{className:c.default.item,key:t},a.default.createElement("img",{className:c.default.thumbnail,role:"presentation",key:t,src:e.url}),a.default.createElement("a",{className:c.default.info,"data-id":e.id},a.default.createElement("span",{className:c.default.title},e.title)))})};return a.default.createElement("div",{className:c.default.normal},a.default.createElement("div",{className:c.default.header},e.username),a.default.createElement("div",{className:c.default.container,onClick:function(e){return t(e.target)}},a.default.createElement("ul",{className:c.default.wrapper},n())),a.default.createElement(i.default,{onClose:e.onClose,activeImage:e.activeImage}))};m.propTypes={click:f,username:p,images:d,activeImage:d,onSelected:f,onClose:f},t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),s=n(25),f=r(s),d=n(2),p=n(7),m=r(p),_=n(9),h=r(_),v=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={page:1,fetching:!1},n.loadMore=n.loadMore.bind(n),n.getImages=n.getImages.bind(n),n.onSelected=n.onSelected.bind(n),n.attachScrollListener=n.attachScrollListener.bind(n),n.detachScrollListener=n.detachScrollListener.bind(n),n.onClose=n.onClose.bind(n),n.onScroll=n.onScroll.bind(n),n}return u(t,e),i(t,[{key:"componentDidMount",value:function(){this.attachScrollListener(),this.getImages(this.state.page)}},{key:"componentDidUpdate",value:function(){this.attachScrollListener()}},{key:"componentWillUnmount",value:function(){this.detachScrollListener()}},{key:"onSelected",value:function(e){this.props.setActiveImage(e)}},{key:"onClose",value:function(){this.props.closeActiveImage()}},{key:"onScroll",value:function(){var e=this,t=f.default.findDOMNode(this);window.scrollY+window.innerHeight>t.offsetHeight&&!this.state.fetching&&this.setState({fetching:!0},function(){e.loadMore()})}},{key:"getImages",value:function(e){var t=this;(0,m.default)(this.props.params.user,60,e).then(function(e){t.props.setImages(e.data),t.setState({fetching:!1})})}},{key:"loadMore",value:function(){var e=this;this.detachScrollListener(),this.setState({page:this.state.page+1},function(){e.getImages(e.state.page)})}},{key:"attachScrollListener",value:function(){window.addEventListener("scroll",this.onScroll)}},{key:"detachScrollListener",value:function(){window.removeEventListener("scroll",this.onScroll)}},{key:"render",value:function(){var e=this;return c.default.createElement(h.default,{ref:function(t){return e.gallery=t},username:this.props.username,click:this.loadMore,images:this.props.images,activeImage:this.props.activeImage,onSelected:this.onSelected,onClose:this.onClose})}}]),t}(c.default.Component);t.default=(0,d.connector)(v)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(10),a=r(o);t.default=a.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=r(o),u=n(20),i=r(u),l=a.default.PropTypes,c=(l.func,l.any,l.bool,function(e){return a.default.createElement("div",{className:i.default.wrapper},a.default.createElement("input",{onChange:e.handleUserEvent,className:i.default.input,type:"text",value:e.user,placeholder:"Ex: 26238363@N03"}),a.default.createElement("button",{className:i.default.button,disabled:e.btnDisabled,onClick:e.goToSearch},"Go"))});t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),s=n(3),f=n(2),d=n(12),p=r(d),m=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleUserEvent=n.handleUserEvent.bind(n),n.goToSearch=n.goToSearch.bind(n),n}return u(t,e),i(t,[{key:"componentDidMount",value:function(){this.props.reset()}},{key:"handleUserEvent",value:function(e){this.props.setUser(e.target.value)}},{key:"goToSearch",value:function(){s.browserHistory.push("/gallery/"+this.props.user)}},{key:"render",value:function(){return c.default.createElement(p.default,{handleUserEvent:this.handleUserEvent,user:this.props.user,btnDisabled:this.props.btnDisabled,goToSearch:this.goToSearch})}}]),t}(c.default.Component);t.default=(0,f.connector)(m)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(13),a=r(o);t.default=a.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=r(l),s=n(21),f=r(s),d=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),i(t,[{key:"render",value:function(){return c.default.createElement("div",{className:f.default.wrapper},this.props.children)}}]),t}(c.default.Component);t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(15),a=r(o);t.default=a.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=r(o),u=n(22),i=r(u),l=function(e){var t=e.activeImage,n=e.onClose;return t?a.default.createElement("div",{className:i.default.wrapper},a.default.createElement("div",{className:i.default.container},a.default.createElement("img",{src:t.url,role:"presentation"}),a.default.createElement("div",{className:i.default.holder},t.user,t.title),a.default.createElement("button",{className:i.default.close,onClick:n},"X"))):null};t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(17),a=r(o);t.default=a.default},function(e,t){e.exports={normal:"flick-demo__Gallery__normal2tYG1",container:"flick-demo__Gallery__container1AJq8",wrapper:"flick-demo__Gallery__wrapperrmt3w",header:"flick-demo__Gallery__headerQzOCl",item:"flick-demo__Gallery__item3PD1Y",thumbnail:"flick-demo__Gallery__thumbnailwPTKi",info:"flick-demo__Gallery__infoIE5hh",title:"flick-demo__Gallery__titleMDHx_",button:"flick-demo__Gallery__button1zbbG"}},function(e,t){e.exports={wrapper:"flick-demo__Home__wrapper3IFKU",input:"flick-demo__Home__inputPxSfx",button:"flick-demo__Home__button2D1Jr"}},function(e,t){e.exports={wrapper:"flick-demo__Layout__wrapper10Jp-"}},function(e,t){e.exports={wrapper:"flick-demo__Lightbox__wrapper1eiIx",container:"flick-demo__Lightbox__container3bB10",holder:"flick-demo__Lightbox__holderHd6wn",close:"flick-demo__Lightbox__close2IzrE"}},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("react-dom")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("redux")}]);